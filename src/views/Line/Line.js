import React, {useEffect, useState} from 'react';
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
  ResponsiveContainer,
  BarChart,
  Bar
} from 'recharts';
import {callApi, METHODS} from "../../utils/requestUtils";
import moment from "moment";

const dataHard = [{name: 'Page A', uv: 400, pv: 2400, amt: 2400}];
// const data = [
//   {"time": 1616983200, "A": 0, "B": 0, "C": 0}, {
//   "time": 1616985000,
//   "A": -0.062263366852021856,
//   "B": 0.01462664190585447,
//   "C": -0.2838353839626661
// }, {"time": 1616988600, "A": 0.256546762589918, "B": 0.6142291189520472, "C": 0.1004122860388708}, {
//   "time": 1616988600,
//   "A": -0.13390108541683607,
//   "B": -0.004412478489166303,
//   "C": -0.004675538855857341
// }, {
//   "time": 1616988600,
//   "A": 0.00474240137962215,
//   "B": 0.005191380232268696,
//   "C": 0.002550413166927099
// }, {
//   "time": 1616990400,
//   "A": -0.10777673833101661,
//   "B": -0.14405332308954694,
//   "C": -0.11519072353376572
// }, {
//   "time": 1616997600,
//   "A": -0.15105023067528656,
//   "B": -0.04054907607890219,
//   "C": -0.061704490810278616
// }, {
//   "time": 1616999400,
//   "A": 0.29304852589676167,
//   "B": 0.1856652876121835,
//   "C": 0.3342616012195151
// }, {
//   "time": 1617001200,
//   "A": 0.2848659061623308,
//   "B": 0.3356026962419078,
//   "C": 0.18036675989152712
// }, {
//   "time": 1617003000,
//   "A": 0.07878527431598999,
//   "B": 0.2548050805804935,
//   "C": 0.34144440302301343
// }, {
//   "time": 1617069600,
//   "A": 0.11450654834323094,
//   "B": -0.4595476771038965,
//   "C": 0.2039162043721708
// }, {
//   "time": 1617071400,
//   "A": -0.07620273071698196,
//   "B": -0.2711432081996138,
//   "C": -0.23425814742253626
// }, {
//   "time": 1617073200,
//   "A": 0.014307850574539059,
//   "B": -0.07693747270799647,
//   "C": 0.029562184054164043
// }, {
//   "time": 1617075000,
//   "A": 0.13104116208904745,
//   "B": -0.0811586964664709,
//   "C": -0.08148307642944201
// }, {
//   "time": 1617076800,
//   "A": -0.01185827786374628,
//   "B": -0.13901905654482022,
//   "C": -0.03802827613599056
// }, {
//   "time": 1617084000,
//   "A": 0.2047581624633799,
//   "B": 0.033890705083079474,
//   "C": 0.283207087785744
// }, {
//   "time": 1617085800,
//   "A": 0.07372202092452114,
//   "B": -0.0716675874865875,
//   "C": 0.07292009138195087
// }, {
//   "time": 1617087600,
//   "A": 0.15916215445995868,
//   "B": 0.12909417615748414,
//   "C": 0.24597862850066293
// }, {
//   "time": 1617089400,
//   "A": -0.0024184932218165025,
//   "B": 0.35813260543424646,
//   "C": 0.18403129372319235
// }, {
//   "time": 1617156000,
//   "A": 0.06871532223644553,
//   "B": -0.386181552044975,
//   "C": 0.05116569717456305
// }, {
//   "time": 1617157800,
//   "A": 0.11615293517187347,
//   "B": 0.11880476156978687,
//   "C": -0.13581318142378596
// }, {
//   "time": 1617159600,
//   "A": 0.6153081510934432,
//   "B": 0.2326434699788375,
//   "C": 0.13809661726250314
// }, {
//   "time": 1617161400,
//   "A": -0.26815970462913896,
//   "B": -0.10956115823279702,
//   "C": -0.2452131048589864
// }, {"time": 1617847200, "A": 3.795039291966257, "B": 3.3769892735821414, "C": 1.1589063084337967}, {
//   "time": 1617849000,
//   "A": -0.2954529961142586,
//   "B": -0.2622289713986938,
//   "C": -0.2479843483245603
// }, {
//   "time": 1617850800,
//   "A": -0.5286599032112075,
//   "B": -0.58532748846108,
//   "C": -0.5684089546272156
// }, {
//   "time": 1617852600,
//   "A": -0.11231521946833507,
//   "B": 0.3068114681562716,
//   "C": 0.2583979328165304
// }, {
//   "time": 1617854400,
//   "A": -0.002339664189374609,
//   "B": 0.0005055752308571115,
//   "C": 0.020885896172043637
// }, {
//   "time": 1617861600,
//   "A": 0.11698594654706752,
//   "B": 0.003033436048841362,
//   "C": 0.10816635065943901
// }, {
//   "time": 1617863400,
//   "A": -0.16262666114955598,
//   "B": 0.1301810148052576,
//   "C": 0.022527690285968474
// }, {
//   "time": 1617865200,
//   "A": 0.07807228915663533,
//   "B": 0.020700902256385975,
//   "C": 0.05839196860180159
// }, {
//   "time": 1617867000,
//   "A": 0.018298966589921212,
//   "B": 0.06890459363958576,
//   "C": 0.07127999699874855
// }, {
//   "time": 1617935400,
//   "A": -0.3690762775981793,
//   "B": -0.3420157236432335,
//   "C": -0.19535968675803236
// }, {
//   "time": 1617937200,
//   "A": 0.04363031865320028,
//   "B": -0.01872862974763669,
//   "C": 0.36310365983447374
// }, {"time": 1617939000, "A": 0.386429159944411, "B": 0.3622390473948327, "C": 0.08608106590814668}, {
//   "time": 1617940800,
//   "A": -0.19467048308799745,
//   "B": -0.344032647790258,
//   "C": -0.059830977488588136
// }, {
//   "time": 1617948000,
//   "A": -0.04821155782562649,
//   "B": 0.08402723292246128,
//   "C": 0.02120282371722406
// }, {
//   "time": 1617949800,
//   "A": -0.009233521265343898,
//   "B": 0.06423192275986049,
//   "C": -0.028680092275071723
// }, {
//   "time": 1617951600,
//   "A": 0.04134794293982072,
//   "B": -0.04902753629049706,
//   "C": -0.013720500923013083
// }, {
//   "time": 1617953400,
//   "A": 0.08031962526693213,
//   "B": -0.003286961886396068,
//   "C": 0.2307855440925078
// }, {
//   "time": 1618194600,
//   "A": 0.2731153458061605,
//   "B": -0.07383264768426681,
//   "C": 0.2754752362698063
// }, {
//   "time": 1618196400,
//   "A": 0.05491360031409487,
//   "B": -0.012904956262316698,
//   "C": 0.01861796757991316
// }, {
//   "time": 1618198200,
//   "A": 0.1942874548755189,
//   "B": -0.01189433778906962,
//   "C": 0.14726139310931982
// }, {
//   "time": 1618200000,
//   "A": 0.14844577004872272,
//   "B": -0.13034707756791164,
//   "C": 0.05700053283106699
// }, {"time": 1618207200, "A": 0.10706711316706533, "B": -0.14597652210936268, "C": 0.18493979136479216}];

function LinePage(props) {
  const [data, setData] = useState([]);

  useEffect(() => {
    let url = 'http://103.107.182.29:8000/api/v1/chart/percent?from=1564790400&to=1609866000000';
    callApi(url, METHODS.GET)
      .then(res => {
        setData(res.data)
      })
      .catch(err => {

      })
  }, [data]);
  return (
    <div className="row">
      <div className="col">
        <LineChart
          width={800}
          height={500}
          data={data}
          margin={{
            top: 5,
            right: 30,
            left: 20,
            bottom: 5,
          }}
        >
          <CartesianGrid strokeDasharray="3 3"/>
          <XAxis dataKey="time"
                 tickFormatter={value => moment(value).format('DD/MMM hh:mm:ss')}
          />
          <YAxis/>
          <Tooltip labelFormatter={value => moment(value).format('DD/MMM hh:mm:ss')}/>
          <Legend/>
          <Line type="monotone" dataKey="A" stroke="#8884d8" activeDot={{r: 8}}/>
          <Line type="monotone" dataKey="B" stroke="#82ca9d"/>
          <Line type="monotone" dataKey="C" stroke="#a88f32"/>
        </LineChart>
      </div>
      <div className="col">
        <BarChart
          width={800}
          height={500}
          data={data}
          margin={{
            top: 5,
            right: 30,
            left: 20,
            bottom: 5,
          }}
        >
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="time"
                 tickFormatter={value => moment(value).format('DD/MMM hh:mm:ss')}
          />
          <YAxis />
          <Tooltip labelFormatter={value => moment(value).format('DD/MMM hh:mm:ss')}/>
          <Legend />
          <Bar dataKey="A" fill="#8884d8" />
          <Bar dataKey="B" fill="#82ca9d" />
          <Bar dataKey="C" fill="#a88f32" />
        </BarChart>
      </div>

    </div>
  );
}

export default LinePage;